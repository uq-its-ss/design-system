import { Meta, Source, Canvas } from "@storybook/blocks";
import StatusBadge from "../../../.storybook/custom/components/StatusBadge";
import * as AccordionStories from "./accordion.stories";

<Meta of={AccordionStories} />

# Accordion

<StatusBadge.Stable />

<StatusBadge.StableDoc />

<a href="https://github.com/uq-its-ss/design-system/issues" target="_blank">
  Check for open issues
</a>

## Overview

An accordion is a vertically stacked group of titles that can expand to show, or collapse to hide associated content.

### How-to

Follow the markup example below, and then initialise all accordions on the page using:

```js
new uq.accordion();
```

<Canvas
  of={AccordionStories.Accordion}
  story={{
    autoplay: true,
  }}
  sourceState="none"
/>

<Source of={AccordionStories.Accordion} />

## Variants

### Subtitle

The subtitle allows for a secondary context. Typically the primary title should provide enough information.

<Canvas
  of={AccordionStories.HasSubtitle}
  story={{
    autoplay: true,
  }}
  withToolbar={true}
  sourceState="none"
/>

<Source of={AccordionStories.HasSubtitle} />

### Using lists

The accordion can be implemented with `div` or `ul` and `li` tags.
Use lists if there is less content and when the semantics of a list serves better with assistive technologies like screen readers.

<Canvas
  of={AccordionStories.UsingLists}
  story={{
    autoplay: true,
  }}
  withToolbar={true}
  sourceState="none"
/>

<Source of={AccordionStories.UsingLists} />

### Using heading tags

The title can be wrapped in a `h2`, `h3`, `h4` or `h5` tag when semantics require.

<Canvas
  of={AccordionStories.WithHeadings}
  story={{
    autoplay: true,
  }}
  withToolbar={true}
  sourceState="none"
/>

<Source of={AccordionStories.WithHeadings} />

### With icon

The accordion button can include an icon within the `.uq-accordion__icon` element.

<Canvas
  of={AccordionStories.WithIcon}
  story={{
    autoplay: true,
  }}
  withToolbar={true}
  sourceState="none"
/>

<Source of={AccordionStories.WithIcon} />

### Compact

A smaller more compact version. Used as a support class for more complex interfaces mixing components. For general content use the standard size accordion.

<Canvas
  of={AccordionStories.Compact}
  story={{
    autoplay: true,
  }}
  withToolbar={true}
  sourceState="none"
/>

<Source of={AccordionStories.Compact} />

## Behaviour

The accordion expand and collpase behaviour can either be automatic or manual.

### Automatic behaviour

By default, users can expand and collapse one accordion at a time. When a user expands one accordion then clicks on another, the previously expanded accordion collapses automatically. This is useful if users only need to view the contents of one accordion at a time. Examples of this default behaviour are shown in the accordions above using `<div>` or `<ul>`.

### Manual Behaviour

Alternate behaviour is to allow users to expand and collapse any number of accordions at a time. When a user expands one accordion then clicks on another, the previously expanded accordion remains expanded and the user will need to manually collapse it. This is useful if users need to view the contents of multiple accordions at a time. To enable this behaviour, add the classname `uq-accordion--is-manual` to the `<div>` or `<ul>` as shown below.

<Canvas
  of={AccordionStories.Manual}
  story={{
    autoplay: true,
  }}
  withToolbar={true}
  sourceState="none"
/>

<Source of={AccordionStories.Manual} />

## How and when to use

Accordions are suitable when users only need to view a few key pieces of content on a page. By hiding most of the content, users can focus on the few topics that are relevant to them.

## Accessibility

- The title of each accordion item is contained in a button element.
- If the accordion content panel associated with an accordion title is visible, the button element has aria-expanded set to true. If the content panel is not visible, aria-expanded is set to false.
- The accordion button element has aria-controls set to the ID of the element containing the accordion content panel.
- Optionally, each element that serves as a container for panel content has `role="region"` and `aria-labelledby` with a value that refers to the button that controls display of the panel.
  - Avoid using role region in circumstances that create landmark region proliferation, e.g., in an accordion that contains more than approximately 6 panels that can be expanded at the same time.
  - Role region is especially helpful to the perception of structure by screen reader users when panels contain heading elements or a nested accordion.
